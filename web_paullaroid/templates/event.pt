<?xml version="1.0" encoding="utf-8"?>
<tal:block metal:use-macro="load: layout.pt">

  <nav id="menu-main" class="clearfix" metal:fill-slot="navigo">
    <a href="${request.route_path('home')}">Home</a> &#x2192;
    <a href="${request.route_path('event', event=event_name)}"> ${event_name}</a>
  </nav>

  <div id="main" class="center" metal:fill-slot="main">
    <div id="search" tal:condition="len(dates) > 1">
      <h3>Chercher votre photo : </h3>
      <form method="GET" action= "${request.route_path('event', event=event_name)}">
        <select id="date_pict" name="date_pict">
	  <tal:block repeat="date dates">
            <option
		selected="selected"
		value="${date.isoformat()}"
		tal:condition="date.isoformat() == request.GET.get('date_pict')">
              ${date.strftime('%d-%m-%Y')}
            </option>
	    <option
		value="${date.isoformat()}"
		tal:condition="date.isoformat() != request.GET.get('date_pict')">
                ${date.strftime('%d-%m-%Y')}
            </option>
	  </tal:block>
        </select>
        <input type="submit" value="Chercher" />
      </form>
    </div>
    <section id="grid-views">
      <div id="slider" height="">
	<tal:block repeat="image images">
           <a href="${request.route_path('image_raw',
                    	    	event=request.matchdict['event'],
                    	    	image=image)}">
	   	<img 	src=	"${request.route_path('image_raw',
                    	    	event=request.matchdict['event'],
                    	    	image=image)}"
	
               		alt=	"${image}"
	       		class=	"thumb mas"/>
           </a>
	</tal:block>
      </div>
    </section>
  <script>
 	//mise en place du slider
	var ele = document.getElementById("slider");//on selectionne l'element qui contient les images 
    	slider = new Nounours(ele,-1);//on creer le slider
    	slider.reset();//on le reset
	
	//modif instant pour le select
	date_pict.onchange = function()
	{
		console.log(this.value);
		window.location.assign("${request.route_path('event', event=event_name)}?date_pict="+this.value);

	} 
  </script>
  </div>
</tal:block>
